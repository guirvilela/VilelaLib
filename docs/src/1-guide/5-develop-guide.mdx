import { Meta } from '@storybook/addon-docs';

<Meta title="Guide/Develop Guide" />

# Guia de boas praticas no desenvolvimento

## Projeto e GIT

Antes de mais nada, sempre mantenha seu projeto local e GIT atualizado com a ultima versÃ£o do repositÃ³rio/origin. Assim vocÃª evita problemas simples de build e tests, por conta de ter um node_modules desatualizado.

Siga os seguintes passos antes de comeÃ§ar a codar:

- rode `git fetch` ou clique em `Fetch from Remote` no `Git Graph`
- crie uma branch nova a partir da `origin/develop`
- rode `npm install`
- code on ğŸ¤˜

## Estrutura dos Projetos

- Todos os projetos do front segue a mesma arquitetura.

```
â”œâ”€â”€ deploy/         # Pipelines e scripts necessÃ¡rios para o CI/CD.
â”œâ”€â”€ public/         # Assets que irÃ£o para o servidor sem passar pelo build.
â”œâ”€â”€ src/            # CÃ³digo-fonte principal.
â”œâ”€â”€â”€â”€ components/   # Pasta com componentes puros, que nÃ£o possuem dependÃªncia de outros componentes do mesmo projeto.
â”œâ”€â”€â”€â”€ config/       # CÃ³digos que representam configuraÃ§Ãµes de ambiente e providers.
â”œâ”€â”€â”€â”€ hooks/        # Pasta com somente o cÃ³digo da logica das pages.
â”œâ”€â”€â”€â”€ i18n/         # Arquivos de localizaÃ§Ã£o e traduÃ§Ã£o em formato de JSON.
â”œâ”€â”€â”€â”€ layouts/      # Componentes nÃ£o puro que representam layout a ser aplicado em cada page.
â”œâ”€â”€â”€â”€ mocks/        # Arquivos JSON que retornam dados fixos para o server mock (`npm run mock`).
â”œâ”€â”€â”€â”€ pages/        # Componentes nÃ£o puro que conectam layout + components puros e a logica da tela representando uma page completa.
â”œâ”€â”€â”€â”€ providers/    # Providers React especÃ­ficos da aplicaÃ§Ã£o, disponibiliza logica de negocio para a aplicaÃ§Ã£o toda.
â”œâ”€â”€â”€â”€ services/     # Classes com as configuraÃ§Ãµes e tipagens necessÃ¡rias para realizar as chamadas http (representam o back-end).
```

### Components

Para fazer um componente, nescessÃ¡rio seguir o mesmo padrÃ£o de separaÃ§Ã£o que fizemos anterirormente, dentro da pasta componente existem os modulos e dentro dos modulos as funcionalidades.

Ao criar uma componente Ã© nescessÃ¡rio seguir as convenÃ§Ãµes abaixo:

- Utilize o export ao declarar o nome do componente
- O nome do componente precisa iniciar com o nome da page
- components nÃ£o possuem export default

  ex:

  ![components example](/assets/img/develop-guide/develop-guide-components-example.png)

### Hooks

Para fazer um Hook/Controller , nescessÃ¡rio seguir o mesmo padrÃ£o de separaÃ§Ã£o que fizemos anterirormente, dentro da pasta hooks existem os modulos e dentro dos modulos as funcionalidades.

![hooks location](/assets/img/develop-guide/develop-guide-hooks-location.png)

Ao criar uma Hook/Controller Ã© nescessÃ¡rio seguir as convenÃ§Ãµes abaixo:

- Utlize export ao declarar o hook
- Nomear o Hook iniciando com "use" e finalizando com "Controller"

  ex: useRepoAcessosController()

- NÃ£o utilizar export default no fim do hook

Dentro da function do hook organizar o cÃ³digo da seguinte forma:

- contexto (useRouter,useService,useAction)
- states da propia controller
- form (caso houver)
- callbacks
- handlers
- useEffect

### I18n

Os projetos precisam possuir um arquivo onde seja possÃ­vel a troca de idiomas, Ã© nescessÃ¡rio que seja feito um arquivo JSON para InternacionalizaÃ§Ã£o.
Para isso temos a pasta "i18n" em cada projeto, dentro dela irÃ¡ conter uma sub pasta para cada modulo do projeto (financeiro, dp , condominios, etc ) , dentro da pasta do modulo irÃ¡ conter mais uma pasta com as opÃ§Ãµes dentro do modulo, e em seguida os arquivos de traduÃ§Ã£o no formato .json , exemplo abaixo:

![i18n structure](/assets/img/develop-guide/develop-guide-i18n-folder-structure.png)

no arquivo json , usamos a seguinte convenÃ§Ã£o:

"nome-da-page_title" : "Nome da Page"

- o nome da propiedade serÃ¡ composto pelo nome da page usando "-" para separar palvras como se fosse espaÃ§os
- apÃ³s o nome da page Ã© utilizado o "\_" para informar qual elemento o texto faz parte na page

  ex: "rateio_list-search-initial-period-label": "PerÃ­odo inicial"

- caso a page partenÃ§a a um fluxo, como "Contratos > novo " nÃ£o serÃ¡ feita mais uma quebra , todos os derivados da page contratos ficarÃ£o no mesmo arquivo

  ex: contratos-list e contratos-new , sÃ£o pages diferentes porÃ©m referente a mesma funcionalidade:

  ![i18n prop model](/assets/img/develop-guide/develop-guide-i18n-prop-model-example.png)

ApÃ³s realizado o procedimento de criaÃ§Ã£o , para utilizar nas pages , Ã© nescessÃ¡rio passar dentro da funÃ§Ã£o "compose" no final da page , a funÃ§Ã£o withI18n , conforme exemplo abaixo:

![i18n](/assets/img/develop-guide/develop-guide-i18n-page-withI18n.png)

A utilizaÃ§Ã£o nas pages , components e hooks e feita atravez da importaÃ§Ã£o da funÃ§Ã£o useI18nMessage()

ex: const t = useI18nMessage();

e para usar em um local:

![i18n use](/assets/img/develop-guide/develop-guide-i18n-use.png)

Conforme a imagem acima, existem palavras que se repetem muito no projeto, para essas palavras simples, colocamos dentro do objeto JSON raiz:

![i18n reuse](/assets/img/develop-guide/develop-guide-i18n-reuse.png)

### Pages

Todas as Paginas do Projeto se encontram na pasta Pages, dentro da pasta hÃ¡ as subpastas dos modulos da aplicaÃ§Ã£o, e dentro de cada modulo as funcionalidades, conforma imagem abaixo:

![page structure](/assets/img/develop-guide/develop-guide-services-structure.png)

Todas as Pages precisam ter restriÃ§Ãµes de acesso por autorizaÃ§Ã£o, para isso no fim de cada page Ã© nescessÃ¡rio ter as funÃ§Ãµes que provem essas restriÃ§Ãµes, sendo elas:

withAuth()
withAccess([])

Ã‰ nescessÃ¡rio passar na funÃ§Ã£o withAccess os codigos de acesso. por exemplo, a tela de contratos:

![with acess example](/assets/img/develop-guide/develop-guide-withAccess-example.png)

para identificar qual o cÃ³digo de acesso que pertence a cada page, entre no GO(gestÃ£o online) e no menu admin selecione o seu usuÃ¡rio:

![auth example](/assets/img/develop-guide/develop-guide-auth-example.png)

Em casos do modulo possuir mais pages fora a index, como no caso da page "Contratos" existem as pages "novo" e "resumo", essas pages tambÃ©m precisam receber o cÃ³digo de autorizaÃ§Ã£o da "Contratos" conforme abaixo:

![auth example2](/assets/img/develop-guide/develop-guide-pages-auth2.png)

Ao criar uma page Ã© nescessÃ¡rio seguir as convenÃ§Ãµes abaixo:

- Utilize o export ao declarar o nome da page
- No fim da pagina, faÃ§a um export default com o nome da page:
  ![page declaration example](/assets/img/develop-guide/develop-guide-page-declaration-example.png)
- O nome da page precisa terminar em "Page" ex: ContratosPage()
- Todas as pages precisam ter a tag Head com o title da page

  ex:

  ![page head example](/assets/img/develop-guide/develop-guide-page-head-example.png)

### Services

Antes de criar uma service Ã© nescessÃ¡rio verificar se a chamada HTTP jÃ¡ existe dentro das services jÃ¡ criadas anterirormente!

Todas as chamadas Http do projeto ficarÃ£o dentro de uma service, ao criar uma service, dentro dos projetos na pasta "Services" , hÃ¡ pastas com cada API que utilizamos no projeto, e dentro da pasta da API existe a pasta para cada entidade da API.

Conforme a imagem abaixo :

![services structure](/assets/img/develop-guide/develop-guide-services-structure.png)

Ao criar uma service Ã© nescessÃ¡rio seguir as convenÃ§Ãµes abaixo:

- Verificar se a Pasta da API e da Entidade da API jÃ¡ existem, caso contrÃ¡rio criar no padrÃ£o da imagem acima

- Ao declarar a service use "export default class (nome da service)"
  ![Services export example](/assets/img/develop-guide/develop-guide-services-export-example.png)

- A service precisa ter o verbo HTTP seguido de sua funcionalidade

  ex: getRateios() , getAcessosCondominio() , postAcessosCondominio()

### Types

Ao criar a Service, Ã© nescessÃ¡rio especificar as tipagens das chamadas http, para isso hÃ¡ o arquivo "types.ts" na pasta de todas as services.

![types location](/assets/img/develop-guide/develop-guide-types-location.png)

Ao criar as tipagens das chamadas no arquivo types, incluir o verbo HTTP no inicio para identificaÃ§Ã£o da utilizaÃ§Ã£o da interface

ex:

![types example1](/assets/img/develop-guide/develop-guide-services-types-example.png)

Caso sua interface tiver mais um objeto dentro, o ideal Ã© seja feita uma nova interface como no exemplo abaixo:

![types example2](/assets/img/develop-guide/develop-guide-interface-example.png)

---

> PrÃ³ximo passo... [Ambientes ğŸš€](/?path=/docs/guide-environments--page)

Keep calm and code on ğŸ¤˜.
